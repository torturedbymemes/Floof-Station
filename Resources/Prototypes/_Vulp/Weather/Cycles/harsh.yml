# Currently unused on Floof, port from Vulpstation. Serves as an example.
# Features more dangerous weathers due to the abundance of shelter
- type: weatherCycle
  id: Harsh
  weathers:
    # Default
    default:
      proto: null
      weight: 17
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 293.15
          moles:
          - 21.824879 # O2
          - 82.10312  # N2
      - !type:WeatherDispatchAnnouncement
        dataset: WeatherStabilizing

    # Warm
    warm:
      proto: null
      weight: 13
      transitions:
        default: 1
        rain: 0.6
        ashfall: 0.3
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 323.15
          moles:
          - 19.394283 # O2
          - 72.95945  # N2
      - !type:WeatherDispatchAnnouncement
        dataset: WeatherHot

    # Cold
    cold:
      proto: null
      weight: 13
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 263.15
          moles:
          - 25.486818 # O2
          - 87.830345  # N2
      - !type:WeatherDispatchAnnouncement
        dataset: WeatherCold

    # Rain
    rain:
      proto: Rain
      weight: 20
      durationMinutes:
        min: 10
        max: 20
      transitions:
        default: 1
        storm: 0.5
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 285
          moles:
          - 21.824879 # O2
          - 82.10312  # N2
      onUpdate:
      - !type:WeatherCleanPuddles
        cleanChance: 0.02
        maxCleaned: 25
        cleanAmount: 2.5
      - !type:WeatherRefillSolutions
        refillChance: 0.02
        maxRefilled: 25
        amount: 10
        reagent: Water

    storm:
      proto: Storm
      weight: 2 # Unlikely to happen on its own; most of the time will be an extension of a rain
      durationMinutes:
        min: 5
        max: 10
      transitions:
        default: 0.4
        rain: 1.2
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 283
          moles:
          - 21.824879 # O2
          - 82.10312  # N2
      onUpdate:
      - !type:WeatherCleanPuddles
        cleanChance: 0.06
        maxCleaned: 50
        cleanAmount: 2.5
      - !type:WeatherRefillSolutions
        refillChance: 0.02
        maxRefilled: 50
        amount: 10
        reagent: Water

    # Snow
    snow:
      proto: SnowfallLight
      weight: 12
      durationSeconds:
        min: 300
        max: 900
      transitions:
        cold: 1
        default: 1
        rain: 0.6 # Might as well
        snowMedium: 0.4
        snowHeavy: 0.1
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 273.15
          moles:
          - 24.009964 # O2
          - 83.770874  # N2

    snowMedium:
      proto: SnowfallMedium
      weight: 3
      durationSeconds:
        min: 300
        max: 600
      transitions:
        cold: 0.4
        snow: 1
        snowHeavy: 0.4
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 253.15
          moles:
          - 25.824879 # O2
          - 90.10312  # N2

    snowHeavy:
      proto: SnowfallHeavy
      weight: 1
      durationSeconds:
        min: 240
        max: 600
      transitions:
        cold: 0.2
        snow: 0.4
        snowMedium: 1
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 223.15 # Shiver me timbers
          moles:
          - 29.824879 # O2
          - 99.10312  # N2
      onUpdate:
      - !type:WeatherRefillSolutions
        refillChance: 0.02
        maxRefilled: 25
        amount: 2
        reagent: Ice

    # Ashfall. Adds some CO2 to the air.
    ashfall:
      proto: AshfallLight
      weight: 7
      durationSeconds: # I'm afraid people might suffocate
        min: 45
        max: 120
      transitions:
        default: 1
        tritiumCloudStarting: 0.3
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 313.15
          moles:
          - 19.381002 # O2
          - 72.687904 # N2
          - 2.9237726 # CO2
      - !type:WeatherDispatchAnnouncement
        dataset: WeatherAshfall
      onUpdate:
      - !type:WeatherRefillSolutions
        refillChance: 0.02
        maxRefilled: 25
        amount: 2
        reagent: Ash

    # OH MY FUCKING GOD RUN FOR YOUR LIVES
    tritiumCloudStarting:
      proto: null
      weight: 0
      durationSeconds:
        min: 60
        max: 120
      transitions:
        tritiumCloud: 1
      onTransition:
      - !type:WeatherSetAtmos # calm before the storm...
        mixture:
          volume: 2500
          temperature: 313.15
          moles:
          - 20.012341 # O2
          - 78.54321  # N2
      - !type:WeatherDispatchAnnouncement
        dataset: WeatherTritiumCloudApproaching

    tritiumCloud:
      proto: Fallout
      weight: 0
      durationSeconds:
        min: 30
        max: 100
      transitions:
        default: 1
      onTransition:
      - !type:WeatherSetAtmos
        mixture:
          volume: 2500
          temperature: 273.15
          moles:
          - 21.1231   # O2
          - 82.5673   # N2
          - 0         # CO2
          - 0         # Plasma
          - 0.5      # Tritium
      - !type:WeatherDispatchAnnouncement
        dataset: WeatherTritiumCloud
      onUpdate:
      - !type:WeatherRefillSolutions
        refillChance: 0.02
        maxRefilled: 25
        amount: 2
        reagent: Tritium
      - !type:WeatherDamageMobs
        damageChance: 0.5
        damage:
          types:
            Radiation: 1.5 # Roughly 0.75 rad/second. Won't kill unless you're already dying, or unless you are extremely unlucky.
        alert: Toxins
        ignoreNpcs: true
        ignoreInternalBreathers: true


